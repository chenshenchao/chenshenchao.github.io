import{i as y,r as i,s as g,w as p,c as A}from"./@vue-78d1d333.js";const E=()=>{};function z(v,n,a){let s;y(a)?s={evaluating:a}:s=a||{};const{lazy:u=!1,evaluating:e=void 0,shallow:h=!0,onError:d=E}=s,o=i(!u),r=h?g(n):i(n);let t=0;return p(async m=>{if(!o.value)return;t++;const c=t;let f=!1;e&&Promise.resolve().then(()=>{e.value=!0});try{const l=await v(w=>{m(()=>{e&&(e.value=!1),f||w()})});c===t&&(r.value=l)}catch(l){d(l)}finally{e&&c===t&&(e.value=!1),f=!0}}),u?A(()=>(o.value=!0,r.value)):r}export{z as c};
