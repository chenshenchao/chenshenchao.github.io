# [草稿]红黑树

在了解红黑树前先想一个问题，最完美的红黑树是怎么样的呢？
答案就是———嘿嘿嘿树，这颗树所有节点都是黑色，且整体呈现一个等腰三角形。

红黑树性质：
1. 节点非黑即红
2. 根（ROOT）节点黑
3. 叶（NIL）节点黑
4. 红节点的子节点黑
5. 任一节点到其任一叶（NIL）子节点途径黑色节点树相同

嘿嘿嘿树完全满足红黑树定义，且没有红节点。
那么为什么没有红节点就完美了呢？
这就涉及为什么红黑树要设计红节点了。
问题就在树的自平衡上，平衡非常耗时。自平衡规则如果太严格，自平衡就会非常耗时。红节点就是用来使得树的平衡规则宽松的。
就拿 AVL 树平衡后的树 两子树高度最大差是 1 。而红黑树呢？是 2 倍。红色节点的加入使得规则宽松到了，最短子树和最长子树的长度的比最大可以是 2 倍。那么为什么是 2 倍呢？因为有 2种颜色 ，红色 和 黑色，且规则制约红不能有红子节点。

为什么根必须是黑色？因为要让顶部形成 嘿嘿嘿树。

## 插入节点

插入的节点初始红色，按一般二分插入找到插入点插入。如果插入后父节点是黑色，说明树现在满足规则，不用调整。

如果插入后父节点是红色，就需要做调整。

可知的条件：
1. 目前节点是红色（插入初始红色）
2. 父节点是红色（就是因为这点冲突规则）
3. 叔叔节点是红色或者叶（NIL）节点（插入前满足规则 5 ）
4. 爷爷节点是黑色（因为父节点是红，插入前满足规则它必然是黑）
5. 目前节点没有子节点（因为刚插入）
6. 兄弟节点是黑色（因为没有插入前树是满足规则的，既然父节点是红，那么挂在隔壁的兄弟节点就是黑）

### 情况0：插入节点是根节点

直接染色成黑。

### 情况1：插入点在左

此时只要让  父节点和爷爷节点做 右旋。
如果没有叔叔节点，父节点变黑，爷爷节点变红。
如果有叔叔节点，自己变黑，此时以父节点为起始递归插入步骤的调整。

### 情况2：插入点在右

此时让 自己 和 父节点做 左旋，就进入情况1，然后按情况1继续。



## 删除节点

按照一般二分查找找到节点。如果节点是黑色，且有红色子节点，把节点删除，把红子节点提升到该位置，然后把子节点染成黑色。
